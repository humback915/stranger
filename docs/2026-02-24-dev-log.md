# ê°œë°œ ë¡œê·¸ - 2026-02-24

## Hello, Stranger â€” ë¸”ë¼ì¸ë“œ ë°ì´íŒ… ì•±

---

## ì‘ì—… ìš”ì•½

ì˜¤ëŠ˜ì€ ë‘ ê°€ì§€ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

1. **Twilio SMS Provider ì—°ë™** â€” Supabase Phone Authë¥¼ í…ŒìŠ¤íŠ¸ ëª¨ë“œì—ì„œ ì‹¤ ë°œì†¡ ê°€ëŠ¥ ìƒíƒœë¡œ ì „í™˜ (Dashboard ì„¤ì •)
2. **ì´ë¯¸ì§€ ìµœì í™”** â€” í”„ë¡œì íŠ¸ ì „ì²´ `<img>` íƒœê·¸ë¥¼ `next/image` ì»´í¬ë„ŒíŠ¸ë¡œ êµì²´ (4ê°œ íŒŒì¼ + `next.config.mjs`)

---

## Phase 1: Twilio SMS Provider ì—°ë™

**ì½”ë“œ ë³€ê²½ ì—†ìŒ** â€” Supabase Dashboard ì„¤ì •ë§Œìœ¼ë¡œ ì™„ë£Œ.

### ì—°ë™ êµ¬ì¡°

```
ì‚¬ìš©ì ì „í™”ë²ˆí˜¸ ì…ë ¥
  â†’ sendOtp() â†’ supabase.auth.signInWithOtp({ phone })
  â†’ Supabase â†’ Twilio API â†’ ì‹¤ì œ SMS ë°œì†¡
  â†’ ì‚¬ìš©ì OTP ì…ë ¥ â†’ verifyOtp() â†’ supabase.auth.verifyOtp()
```

ê¸°ì¡´ `src/actions/auth.ts` ì½”ë“œ(`sendOtp` / `verifyOtp`)ëŠ” ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ë™ì‘.

### Supabase Dashboard ì„¤ì • ë‚´ì—­

| í•­ëª© | ê°’ |
|------|-----|
| Phone Provider | Enabled |
| SMS Provider | Twilio |
| Twilio Account SID | ë“±ë¡ ì™„ë£Œ |
| Twilio Auth Token | ë“±ë¡ ì™„ë£Œ |
| Twilio Message Service SID | ë“±ë¡ ì™„ë£Œ |
| OTP Expiry | 180ì´ˆ (ì½”ë“œ ì¹´ìš´íŠ¸ë‹¤ìš´ê³¼ ì¼ì¹˜) |
| OTP Length | 6ìë¦¬ (ì½”ë“œì™€ ì¼ì¹˜) |

### Trial ê³„ì • ì œí•œ ì‚¬í•­

í˜„ì¬ Twilio Trial ê³„ì •ì´ë¯€ë¡œ **Verified Caller IDs**ì— ë“±ë¡ëœ ë²ˆí˜¸ë¡œë§Œ SMS ë°œì†¡ ê°€ëŠ¥.
ì‹¤ ì‚¬ìš©ì ì˜¨ë³´ë”© ì‹œì‘ ì „ ìœ ë£Œ ì—…ê·¸ë ˆì´ë“œ í•„ìš” (TODO #1).

> **TODO**: Twilio Trial â†’ Paid ì—…ê·¸ë ˆì´ë“œ (Billing â†’ Upgrade)

---

## Phase 2: ì´ë¯¸ì§€ ìµœì í™” (`<img>` â†’ `next/image`)

### ì»¤ë°‹: (ì˜¤ëŠ˜)

### ë°°ê²½

`<img>` íƒœê·¸ëŠ” Next.jsì˜ ì´ë¯¸ì§€ ìµœì í™”(lazy loading, WebP ë³€í™˜, ì‚¬ì´ì¦ˆ ìë™ ì¡°ì •)ë¥¼ ë°›ì§€ ëª»í•¨.
`next/image`ì˜ `fill` ëª¨ë“œë¡œ êµì²´í•˜ì—¬ Lighthouse ì„±ëŠ¥ ì ìˆ˜ ë° Core Web Vitals ê°œì„ .

### ë³€ê²½ íŒŒì¼

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© |
|------|-----------|
| `next.config.mjs` | `images.remotePatterns`ì— Supabase Storage ë„ë©”ì¸ ì¶”ê°€ |
| `src/components/profile/PhotoEditor.tsx` | `<img>` â†’ `<Image fill>` + `import Image from "next/image"` |
| `src/components/matches/MatchCard.tsx` | `PhotoCarousel` ë‚´ `<img>` â†’ `<Image fill>`, ë¶€ëª¨ divì— `relative` ì¶”ê°€ |
| `src/app/[locale]/(main)/settings/SettingsClient.tsx` | `<img>` â†’ `<Image fill>` + import ì¶”ê°€ |
| `src/components/onboarding/PhotosStep.tsx` | `<img>` â†’ `<Image fill>` + import ì¶”ê°€ |

### next.config.mjs ë³€ê²½ ë‚´ì—­

```js
images: {
  remotePatterns: [
    {
      protocol: "https",
      hostname: "vwbhvqiljotlvlzkubkr.supabase.co",
      pathname: "/storage/v1/object/public/**",
    },
  ],
},
```

### êµì²´ íŒ¨í„´

**Before:**
```tsx
<div className="relative aspect-square">
  <img
    src={url}
    alt="..."
    className="h-full w-full rounded-xl object-cover"
  />
</div>
```

**After:**
```tsx
<div className="relative aspect-square">
  <Image
    src={url}
    alt="..."
    fill
    className="rounded-xl object-cover"
  />
</div>
```

- `fill` prop: ë¶€ëª¨ ìš”ì†Œ ê¸°ì¤€ìœ¼ë¡œ ì±„ì›€ (`position: absolute` ì ìš©ë¨)
- ë¶€ëª¨ ìš”ì†Œì— `relative` í•„ìˆ˜ â€” `MatchCard.tsx`ì˜ `aspect-[4/3]` divì— ì¶”ê°€
- `h-full w-full` í´ë˜ìŠ¤ ì œê±° (`fill`ì´ ëŒ€ì²´)
- TypeScript íƒ€ì… ì²´í¬ í†µê³¼ í™•ì¸

---

## í˜„ì¬ TODO í˜„í™©

| ìˆœìœ„ | í•­ëª© | ìƒíƒœ |
|------|------|------|
| ğŸ”´ 1-A | Twilio ìœ ë£Œ ì—…ê·¸ë ˆì´ë“œ (Trial â†’ Paid) | ëŒ€ê¸° ì¤‘ |
| ğŸ”´ 1-B | Vercel Pro ì—…ê·¸ë ˆì´ë“œ + í¬ë¡  ë³µì› | ëŒ€ê¸° ì¤‘ |
| ğŸŸ  2-A | ì „ì²´ ê¸°ëŠ¥ QA í…ŒìŠ¤íŠ¸ | ë¯¸ì§„í–‰ |
| ğŸŸ  2-B | Web Push VAPID í”„ë¡œë•ì…˜ ê²€ì¦ | ê°€ì´ë“œ ì‘ì„± ì™„ë£Œ, ì‹¤ê¸°ê¸° í…ŒìŠ¤íŠ¸ í•„ìš” |
| ğŸŸ¡ 3-A | ì´ë¯¸ì§€ ìµœì í™” (`<img>` â†’ `next/image`) | âœ… ì™„ë£Œ |
| ğŸŸ¡ 3-B | ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²° | ë¯¸ì§„í–‰ |
| ğŸŸ¢ 4 | iOS/Android ì•± ë°°í¬ | ë¯¸ì§„í–‰ |
